(ns status-im.ethereum.ens-test
  (:require [cljs.test :refer-macros [deftest is]]
            [status-im.ethereum.ens :as ens]))

(deftest namehash
  (is (= (str "0x" ens/default-namehash) (ens/namehash nil)))
  (is (= (str "0x" ens/default-namehash) (ens/namehash "")))
  (is (= "0x93cdeb708b7545dc668eb9280176169d1c33cfd8ed6f04690a0bcc88a93fc4ae"
         (ens/namehash "eth")))
  (is (= "0xde9b09fd7c5f901e23a3f19fecc54828e9c848539801e86591bd9801b019f84f"
         (ens/namehash "foo.eth"))))

(deftest cleanup-hash
  ;; simpledapp.eth
  (is (= "0xe30101701220795c1ea0ceaf4ceedc9896f14b73bb30e978e4855ee221b9a57f5a934268280e"
         (ens/cleanup-hash "0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000026e30101701220795c1ea0ceaf4ceedc9896f14b73bb30e978e4855ee221b9a57f5a934268280e0000000000000000000000000000000000000000000000000000")))
  ;; ethereum.eth
  (is (= "0xe301017012206e70f0f72e2bcd0ad69bb2b15ee9e0f4f88693f6b2f485e48699e7d6f8dbd62a"
         (ens/cleanup-hash "0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000026e301017012206e70f0f72e2bcd0ad69bb2b15ee9e0f4f88693f6b2f485e48699e7d6f8dbd62a0000000000000000000000000000000000000000000000000000"))))
